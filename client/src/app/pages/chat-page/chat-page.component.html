<div class="layout">
  <aside class="chat-list" [class.visible-mobile]="!selectedChatId" [class.hidden-mobile]="selectedChatId">
    <app-chats-header
      [title]="sidebarHeaderTitle"
      (burgerClick)="handleEditClick()">
    </app-chats-header>

    @if (!isEditMode && !isUsersMode) {
      <app-chats
        [currentChatId]="selectedChatId"
        (chatSelected)="onChatSelected($event)">
      </app-chats>
    }

    @if (isEditMode) {
      <app-chats-edit
        [users]="users"
        [currentUser]="currentUser"
        (createChat)="handleCreateClick($event)"
        (backToChats)="handleBackToChats()"
        (openUsers)="handleOpenUsers()">
      </app-chats-edit>
    }

    @if (isUsersMode) {
      <app-chat-users
        [users]="users"
        [currentUser]="currentUser"
        (userSelected)="handleUserSelected($event)">
      </app-chat-users>
    }
  </aside>

  <main class="chat" [class.visible-mobile]="selectedChatId" [class.hidden-mobile]="!selectedChatId">
      <app-chat-header (returnClick)="handleReturnClick()"></app-chat-header>
      @if (selectedChatId) {
        <app-chat [chatId]="selectedChatId"></app-chat>
      } @else {
        <app-chat-placeholder></app-chat-placeholder>
      }
  </main>
</div>
